<?php
include_once __DIR__ . '/vendor/autoload.php';

use CrEOF\Geo\WKT\Parser;

function csvToArray($filename = '', $delimiter = ',')
{
    if (! file_exists($filename) || ! is_readable($filename)) {
        return false;
    }

    $header = null;
    $data = array();

    if (($handle = fopen($filename, 'r')) !== false) {
        while (($row = fgetcsv($handle, 4096, $delimiter)) !== false) {
            if (! $header) {
                $header = $row;
            } else {
                $data[] = array_combine($header, $row);
            }
        }

        fclose($handle);
    }

    return $data;
}

$data = csvToArray('objects.txt', '|');

$parser = new Parser();
$values = array();

foreach ($data as $object) {
    $buffer = fopen('php://memory', 'r+');

    fwrite($buffer, pack('H*', $object['binary']));

    list($header, $wkb) = parseGeometry($buffer);

    fclose($buffer);

    $values[] = [
        $parser->parse($object['text']),
        unpack('H*', $wkb)[1]
    ];
}

function readHeader($binary)
{
    $header = [];
    $buffer = fopen('php://memory', 'r+');

    fwrite($buffer, $binary);

    $unpack = unpack('A2magic/Cversion/Cflags', fread($buffer, 4));

    $header['magic']   = $unpack['magic'];
    $header['version'] = $unpack['version'];
    $header['flags']   = $unpack['flags'];

    $flags = $unpack['flags'];

    $unpack['flags'] = [];

    $unpack['flags']['R'] = $flags & 0xC0;
    $unpack['flags']['X'] = $flags & 0x20;
    $unpack['flags']['Y'] = $flags & 0x10;
    $unpack['flags']['E'] = $flags & 0x0E;
    $unpack['flags']['B'] = $flags & 0x01;


    $envSize = null;

    switch ($unpack['flags']['E']) {
        case 0:
            break;
        case 1:
            $envSize = 4;
            break;
        case 2:
            //no break
        case 3:
            $envSize = 6;
            break;
        case 4:
            $envSize = 8;
            break;
        default:
            //error
    }

    if ($envSize) {
        $env = unpack('c' . $envSize . 'env/A*data', $unpack['data']);
        $unpack['envelope'] = $env['env'];
        $unpack['data']     = $env['data'];
    }

    return $unpack;
}

function parseGeometry($buffer)
{
    // Default values
    $header = [
        'magic'     => '',
        'version'   => 0,
        'flags'     => 0,
        'srs_id'    => 0,
        'envelope'  => []
    ];
    $wkb = '';

    // Open binary
    if (fseek($buffer, 0) === -1) {
        throw new \Exception('GeoPackage error: could start reading geometry buffer');
    }

    // Get stream stats
    $fstat = fstat($buffer);
    $total = $fstat['size'];
    $read  = 0;

    // Parse header
    $bytes = unpack('A2magic/c1version/c1flags', fread($buffer, 4));
    $read += 4;

    $header['magic']        = $bytes['magic'];
    $header['version']      = $bytes['version'];
    $header['flags']        = $bytes['flags'];
    $header['envelop_flag'] = ($header['flags'] >> 1) & 7;
    $header['byte_order']   = $header['flags'] & 1;

    $bytes     = array_values(unpack($header['byte_order'] ? 'V' : 'N', fread($buffer, 4)));
    $read     += 4;

    $header['srs_id'] = $bytes[0];

    // Parse envelop
    switch ($header['envelop_flag']) {
        case 1: // 32 bytes envelop
            $data  = fread($buffer, 32);
            $data  = $header['byte_order'] ? strrev($data) : $data;
            $bytes = array_values(unpack('d*', $data));

            $header['envelope'] = [
                'minx' => $bytes[0],
                'miny' => $bytes[1],
                'maxx' => $bytes[2],
                'maxy' => $bytes[3],
                'minz' => false,
                'maxz' => false,
                'minm' => false,
                'maxm' => false
            ];

            $read += 32;

            break;
        case 2: // 48 bytes envelop
            $data  = fread($buffer, 48);
            $data  = $header['byte_order'] ? strrev($data) : $data;
            $bytes = array_values(unpack('d*', $data));

            $header['envelope'] = [
                'minx' => $bytes[0],
                'miny' => $bytes[1],
                'maxx' => $bytes[2],
                'maxy' => $bytes[3],
                'minz' => $bytes[4],
                'maxz' => $bytes[5],
                'minm' => false,
                'maxm' => false
            ];

            $read += 48;

            break;
        case 3: // 48 bytes envelop
            $data  = fread($buffer, 48);
            $data  = $header['byte_order'] ? strrev($data) : $data;
            $bytes = array_values(unpack('d*', $data));

            $header['envelope'] = [
                'minx' => $bytes[0],
                'miny' => $bytes[1],
                'maxx' => $bytes[2],
                'maxy' => $bytes[3],
                'minz' => false,
                'maxz' => false,
                'minm' => $bytes[4],
                'maxm' => $bytes[5]
            ];

            $read += 48;

            break;
        default: // 0 envelop
    }

    // Get WKB from bytes left
    $wkb = fread($buffer, $total - $read);

    return [$header, $wkb];
}

$t = null;

$var = array(
    array(
        'value' => '01070000000600000001010000000000000000000000000000000000f03f010200000002000000000000000000004000000000000008400000000000001040000000000000144001030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f01040000000200000001010000000000000000000000000000000000f03f0101000000000000000000004000000000000008400105000000020000000102000000020000000000000000000000000000000000f03f000000000000004000000000000008400102000000020000000000000000001040000000000000144000000000000018400000000000001c4001060000000200000001030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f0103000000010000000500000000000000000022c0000000000000000000000000000022c00000000000002440000000000000f0bf0000000000002440000000000000f0bf000000000000000000000000000022c00000000000000000',
        'expected' => array(
            'type'      => 'GEOMETRYCOLLECTION',
            'value'     => array(
                array('type' => 'POINT', 'value' => array(0, 1)),
                array('type' => 'POINT', 'value' => array(0, 0)),
                array('type' => 'LINESTRING', 'value' => array(array(2, 3), array(4, 5))),
                array('type' => 'POLYGON', 'value' => array(array(array(0, 0), array(0,10), array(10,10), array(10,0), array(0,0)), array(array(1,1), array(1,9), array(9,9), array(9,1), array(1,1))))),
            'srid'      => null,
            'dimension' => null,
        )
    ),
    array(
        'value' => '01040000000200000001010000000000000000000000000000000000f03f010100000000000000000000400000000000000840',
        'expected' => array(
            'type'      => 'MULTIPOINT',
            'value'     => array(array(0, 1,), array(2, 3,),),
            'srid'      => null,
            'dimension' => null,
        )
    ),
    array(
        'value' => '0105000000020000000102000000020000000000000000000000000000000000f03f000000000000004000000000000008400102000000020000000000000000001040000000000000144000000000000018400000000000001c40',
        'expected' => array(
            'type'      => 'MULTILINESTRING',
            'value'     => array(array(array(0,1), array(2,3)), array(array(4,5), array(6,7))),
            'srid'      => null,
            'dimension' => null,
        )
    ),
    array(
        'value' => '01060000000200000001030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f0103000000010000000500000000000000000022c0000000000000000000000000000022c00000000000002440000000000000f0bf0000000000002440000000000000f0bf000000000000000000000000000022c00000000000000000',
        'expected' => array(
            'type'      => 'MULTIPOLYGON',
            'value'     => array(array(array(array(0,0), array(0,10), array(10,10), array(10,0), array(0,0)), array(array(1,1), array(1,9), array(9,9), array(9,1), array(1,1))), array(array(array(-9,0), array(-9,10), array(-1,10), array(-1,0), array(-9,0)))),
            'srid'      => null,
            'dimension' => null,
        )
    ),
    array(
        'value' => '01ec0300000200000001e90300000000000000000000000000000000f03f000000000000004001e9030000000000000000084000000000000010400000000000001440',
        'expected' => array(
            'type'      => 'MULTIPOINT',
            'value'=> array(array(0, 1, 2), array(3, 4, 5)),
            'srid'      => null,
            'dimension' => 'Z',
        )
    ),
    array(
        'value' => '01ed0300000200000001ea030000020000000000000000000000000000000000f03f000000000000004000000000000008400000000000001040000000000000144001ea0300000200000000000000000018400000000000001c400000000000002040000000000000224000000000000024400000000000002640',
        'expected' => array(
            'type'      => 'MULTILINESTRING',
            'value'     => array(array(array(0, 1, 2), array(3, 4, 5)), array(array(6, 7, 8), array(9, 10, 11))),
            'srid'      => null,
            'dimension' => 'Z'
        )
    ),
    array(
        'value' => '01ee0300000200000001eb030000020000000500000000000000000000000000000000000000000000000000594000000000000000000000000000002440000000000000594000000000000024400000000000002440000000000000594000000000000024400000000000000000000000000000594000000000000000000000000000000000000000000000594005000000000000000000f03f000000000000f03f0000000000005940000000000000f03f000000000000224000000000000059400000000000002240000000000000224000000000000059400000000000002240000000000000f03f0000000000005940000000000000f03f000000000000f03f000000000000594001eb030000010000000500000000000000000022c00000000000000000000000000000494000000000000022c000000000000024400000000000004940000000000000f0bf00000000000024400000000000004940000000000000f0bf0000000000000000000000000000494000000000000022c000000000000000000000000000004940',
        'expected' => array(
            'type'      => 'MULTIPOLYGON',
            'value'     => array(
                array(
                    array(array(0, 0, 100), array(0, 10, 100), array(10, 10, 100), array(10, 0, 100), array(0, 0, 100)),
                    array(array(1, 1, 100), array(1, 9, 100), array(9, 9, 100), array(9, 1, 100), array(1, 1, 100))
                ),
                array(
                    array(array(-9, 0, 50), array(-9, 10, 50), array(-1, 10, 50), array(-1, 0, 50), array(-9, 0, 50))
                )
            ),
            'srid'=>null,
            'dimension' => 'Z'
        )
    ),
    array(
        'value' => '0101000000000000000000f03f0000000000000040',
        'expected' => array(
            'type'      => 'POINT',
            'value'     => array(1, 2),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '010200000002000000000000000000f03f000000000000004000000000000008400000000000001040',
        'expected' => array(
            'type'      => 'LINESTRING',
            'value'     => array(array(1, 2), array(3, 4)),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f',
        'expected' => array(
            'type'      => 'POLYGON',
            'value'     => array(
                array(array(0, 0), array(0, 10), array(10, 10), array(10, 0), array(0, 0)),
                array(array(1, 1), array(1, 9), array(9, 9), array(9, 1), array(1, 1))
            ),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01040000000200000001010000000000000000000000000000000000f03f010100000000000000000000400000000000000840',
        'expected' => array(
            'type'      => 'MULTIPOINT',
            'value'     => array(array(0, 1), array(2, 3)),
            'srid'      => null,
            'dimension' => null
        )
    ),

    array(
        'value' => '0105000000020000000102000000020000000000000000000000000000000000f03f000000000000004000000000000008400102000000020000000000000000001040000000000000144000000000000018400000000000001c40',
        'expected' => array(
            'type'      => 'MULTILINESTRING',
            'value'     => array(array(array(0, 1), array(2, 3)), array(array(4, 5), array(6, 7))),
            'srid'      => null,
            'dimension' => null
        )
    ),

    array(
        'value' => '01060000000200000001030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f0103000000010000000500000000000000000022c0000000000000000000000000000022c00000000000002440000000000000f0bf0000000000002440000000000000f0bf000000000000000000000000000022c00000000000000000',
        'expected' => array(
            'type'      => 'MULTIPOLYGON',
            'value'     => array(
                array(
                    array(array(0, 0), array(0, 10), array(10, 10), array(10, 0), array(0, 0)),
                    array(array(1, 1), array(1, 9), array(9, 9), array(9, 1), array(1, 1))
                ),
                array(
                    array(array(-9, 0), array(-9, 10), array(-1, 10), array(-1, 0), array(-9, 0))
                )
            ),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01070000000600000001010000000000000000000000000000000000f03f010200000002000000000000000000004000000000000008400000000000001040000000000000144001030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f01040000000200000001010000000000000000000000000000000000f03f0101000000000000000000004000000000000008400105000000020000000102000000020000000000000000000000000000000000f03f000000000000004000000000000008400102000000020000000000000000001040000000000000144000000000000018400000000000001c4001060000000200000001030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f0103000000010000000500000000000000000022c0000000000000000000000000000022c00000000000002440000000000000f0bf0000000000002440000000000000f0bf000000000000000000000000000022c00000000000000000',
        'expected' => array(
            'type'      => 'GEOMETRYCOLLECTION',
            'value'     => array(
                array(
                    'type'  => 'POINT',
                    'value' => array(0, 1)
                ),
                array(
                    'type'  => 'POINT',
                    'value' => array(0, 0)
                ),
                array(
                    'type'  => 'LINESTRING',
                    'value' => array(array(2, 3), array(4, 5)),
                ),
                array(
                    'type'  => 'POLYGON',
                    'value' => array(
                        array(array(0, 0), array(0, 10), array(10, 10), array(10, 0), array(0, 0)),
                        array(array(1, 1), array(1, 9), array(9, 9), array(9, 1), array(1, 1)))
                )),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01e9030000000000000000f03f00000000000000400000000000000840',
        'expected' => array(
            'type'      => 'POINT',
            'value'     => array(1, 2, 3),
            'srid'      => null,
            'dimension' => 'Z',
        )
    ),
    array(
        'value' => '01ea03000002000000000000000000f03f00000000000000400000000000000840000000000000104000000000000014400000000000001840',
        'expected' => array(
            'type'      => 'LINESTRING',
            'value'     => array(array(1, 2, 3), array(4, 5, 6)),
            'srid'      => null,
            'dimension' => 'Z',
        )
    ),
    array(
        'value' => '01eb030000020000000500000000000000000000000000000000000000000000000000594000000000000000000000000000002440000000000000594000000000000024400000000000002440000000000000594000000000000024400000000000000000000000000000594000000000000000000000000000000000000000000000594005000000000000000000f03f000000000000f03f0000000000005940000000000000f03f000000000000224000000000000059400000000000002240000000000000224000000000000059400000000000002240000000000000f03f0000000000005940000000000000f03f000000000000f03f0000000000005940',
        'expected' => array(
            'type'      => 'POLYGON',
            'value'     => array(
                array(array(0, 0, 100), array(0, 10, 100), array(10, 10, 100), array(10, 0, 100), array(0, 0, 100)),
                array(array(1, 1, 100), array(1, 9, 100), array(9, 9, 100), array(9, 1, 100), array(1, 1, 100))
            ),
            'srid'      => null,
            'dimension' => 'Z',
        )
    ),
    array(
        'value' => '01ec0300000200000001e90300000000000000000000000000000000f03f000000000000004001e9030000000000000000084000000000000010400000000000001440',
        'expected' => array(
            'type'      => 'MULTIPOINT',
            'value'     => array(array(0, 1, 2), array(3, 4, 5)),
            'srid'      => null,
            'dimension' => 'Z',
        )
    ),
    array(
        'value' => '01ed0300000200000001ea030000020000000000000000000000000000000000f03f000000000000004000000000000008400000000000001040000000000000144001ea0300000200000000000000000018400000000000001c400000000000002040000000000000224000000000000024400000000000002640',
        'expected' => array(
            'type'      => 'MULTILINESTRING',
            'value'     => array(array(array(0, 1, 2), array(3, 4, 5)), array(array(6, 7, 8), array(9, 10, 11))),
            'srid'=>null,
            'dimension'=>'Z'
        )
    ),
    array(
        'value' => '01ee0300000200000001eb030000020000000500000000000000000000000000000000000000000000000000594000000000000000000000000000002440000000000000594000000000000024400000000000002440000000000000594000000000000024400000000000000000000000000000594000000000000000000000000000000000000000000000594005000000000000000000f03f000000000000f03f0000000000005940000000000000f03f000000000000224000000000000059400000000000002240000000000000224000000000000059400000000000002240000000000000f03f0000000000005940000000000000f03f000000000000f03f000000000000594001eb030000010000000500000000000000000022c00000000000000000000000000000494000000000000022c000000000000024400000000000004940000000000000f0bf00000000000024400000000000004940000000000000f0bf0000000000000000000000000000494000000000000022c000000000000000000000000000004940',
        'expected' => array(
            'type'=>'MULTIPOLYGON',
            'value'=> array(
                array(
                    array(array(0, 0, 100), array(0, 10, 100), array(10, 10, 100), array(10, 0, 100), array(0, 0, 100)),
                    array(array(1, 1, 100), array(1, 9, 100), array(9, 9, 100), array(9, 1, 100), array(1, 1, 100))
                ),
                array(
                    array(array(-9, 0, 50), array(-9, 10, 50), array(-1, 10, 50), array(-1, 0, 50), array(-9, 0, 50))
                )
            ),
            'srid'=>null,
            'dimension'=>'Z'
        )
    ),
    array(
        'value' => '0101000000000000000000f03f0000000000000040',
        'expected' => array(
            'type'      => 'POINT',
            'value'     => array(1, 2),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01e9030000000000000000f03f00000000000000400000000000000840',
        'expected' => array(
            'type'      => 'POINT',
            'value'     => array(1, 2, 3),
            'srid'      => null,
            'dimension' => 'Z'
        )
    ),
    array(
        'value' => '010200000002000000000000000000f03f000000000000004000000000000008400000000000001040',
        'expected' => array(
            'type'      => 'LINESTRING',
            'value'     => array(array(1, 2), array(3, 4)),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01ea03000002000000000000000000f03f00000000000000400000000000000840000000000000104000000000000014400000000000001840',
        'expected' => array(
            'type'      => 'LINESTRING',
            'value'     => array(array(1, 2, 3), array(4, 5, 6)),
            'srid'      => null,
            'dimension' => 'Z'
        )
    ),
    array(
        'value' => '01030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f',
        'expected' => array(
            'type'      => 'POLYGON',
            'value'     => array(
                array(array(0, 0), array(0, 10), array(10, 10), array(10, 0), array(0, 0)),
                array(array(1, 1), array(1, 9), array(9, 9), array(9, 1), array(1, 1))
            ),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01eb030000020000000500000000000000000000000000000000000000000000000000594000000000000000000000000000002440000000000000594000000000000024400000000000002440000000000000594000000000000024400000000000000000000000000000594000000000000000000000000000000000000000000000594005000000000000000000f03f000000000000f03f0000000000005940000000000000f03f000000000000224000000000000059400000000000002240000000000000224000000000000059400000000000002240000000000000f03f0000000000005940000000000000f03f000000000000f03f0000000000005940',
        'expected' => array(
            'type'      => 'POLYGON',
            'value'     => array(
                array(array(0, 0, 100), array(0, 10, 100), array(10, 10, 100), array(10, 0, 100), array(0, 0, 100)),
                array(array(1, 1, 100), array(1, 9, 100), array(9, 9, 100), array(9, 1, 100), array(1, 1, 100))
            ),
            'srid'      => null,
            'dimension' => 'Z'

        )
    ),
    array(
        'value' => '01040000000200000001010000000000000000000000000000000000f03f010100000000000000000000400000000000000840',
        'expected' => array(
            'type'      => 'MULTIPOINT',
            'value'     => array(array(0, 1), array(2, 3)),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01ec0300000200000001e90300000000000000000000000000000000f03f000000000000004001e9030000000000000000084000000000000010400000000000001440',
        'expected' => array(
            'type'      => 'MULTIPOINT',
            'value'     => array(array(0, 1, 2), array(3, 4, 5)),
            'srid'      => null,
            'dimension' => 'Z'

        )
    ),
    array(
        'value' => '0105000000020000000102000000020000000000000000000000000000000000f03f000000000000004000000000000008400102000000020000000000000000001040000000000000144000000000000018400000000000001c40',
        'expected' => array(
            'type'      => 'MULTILINESTRING',
            'value'     => array(array(array(0, 1), array(2, 3)), array(array(4, 5), array(6, 7))),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01ed0300000200000001ea030000020000000000000000000000000000000000f03f000000000000004000000000000008400000000000001040000000000000144001ea0300000200000000000000000018400000000000001c400000000000002040000000000000224000000000000024400000000000002640',
        'expected' => array(
            'type'      => 'MULTILINESTRING',
            'value'     => array(
                array(array(0, 1, 2), array(3, 4, 5)),
                array(array(6, 7, 8), array(9, 10, 11))
            ),
            'srid'      => null,
            'dimension' => 'Z'
        )
    ),
    array(
        'value' => '01060000000200000001030000000200000005000000000000000000000000000000000000000000000000000000000000000000244000000000000024400000000000002440000000000000244000000000000000000000000000000000000000000000000005000000000000000000f03f000000000000f03f000000000000f03f0000000000002240000000000000224000000000000022400000000000002240000000000000f03f000000000000f03f000000000000f03f0103000000010000000500000000000000000022c0000000000000000000000000000022c00000000000002440000000000000f0bf0000000000002440000000000000f0bf000000000000000000000000000022c00000000000000000',
        'expected' => array(
            'type'      => 'MULTIPOLYGON',
            'value'     => array(
                array(
                    array(array(0, 0), array(0, 10), array(10, 10), array(10, 0), array(0, 0)),
                    array(array(1, 1), array(1, 9), array(9, 9), array(9, 1), array(1, 1))
                ),
                array(
                    array(array(-9, 0), array(-9, 10), array(-1, 10), array(-1, 0), array(-9, 0))
                )
            ),
            'srid'      => null,
            'dimension' => null
        )
    ),
    array(
        'value' => '01ee0300000200000001eb030000020000000500000000000000000000000000000000000000000000000000594000000000000000000000000000002440000000000000594000000000000024400000000000002440000000000000594000000000000024400000000000000000000000000000594000000000000000000000000000000000000000000000594005000000000000000000f03f000000000000f03f0000000000005940000000000000f03f000000000000224000000000000059400000000000002240000000000000224000000000000059400000000000002240000000000000f03f0000000000005940000000000000f03f000000000000f03f000000000000594001eb030000010000000500000000000000000022c00000000000000000000000000000494000000000000022c000000000000024400000000000004940000000000000f0bf00000000000024400000000000004940000000000000f0bf0000000000000000000000000000494000000000000022c000000000000000000000000000004940',
        'expected' => array(
            'type'      => 'MULTIPOLYGON',
            'value'     => array(
                array(
                    array(array(0, 0, 100), array(0, 10, 100), array(10, 10, 100), array(10, 0, 100), array(0, 0, 100)),
                    array(array(1, 1, 100), array(1, 9, 100), array(9, 9, 100), array(9, 1, 100), array(1, 1, 100))
                ),
                array(
                    array(array(-9, 0, 50), array(-9, 10, 50), array(-1, 10, 50), array(-1, 0, 50), array(-9, 0, 50))
                )
            ),
            'srid'      => null,
            'dimension' => 'Z'
        )
    )
);
